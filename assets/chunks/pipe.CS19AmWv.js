import{A as i,S as l,j as p}from"./chain-of-custody-client.DEyvJWv5.js";function j(n,o){{const s=n.find(r=>r&&r.status==="error");if(s)return s}{const s=n.find(r=>r&&r.status==="pending");if(s)return s}return{status:"completed",value:n.filter(s=>s.status==="completed").map(s=>s.value)}}function d(n){return n!=null&&typeof n=="object"&&"then"in n&&typeof n.then=="function"}function v(n,o,a){const s=new l.Computed(()=>{const e=[n,...a].map(u=>u.get());let t=e[0];if(t&&t.status){if(t.status==="error")return t;if(t.status==="pending")return t;t=t.value}try{return o(t,...e.slice(1).map(f=>f.value).reverse())}catch(u){return{status:"error",error:u}}});let r;const c=new i(()=>{const e=n.get();return r=void 0,e});return new i(()=>{c.get();const e=s.get();if(e&&e.get&&!e.has){const t=e.get();return t&&t.status?t:{status:"completed",value:t}}else if(d(e)){r||(r=p(()=>e));const t=r.get();return t.status==="completed"&&t.value.status?t.value:t}else return e&&e.status?e:{status:"completed",value:e}})}function y(n,o,a,s,r,c,e){let t=n;const u=t.get();return(!u||!(typeof u=="object"&&"status"in u))&&(t=new i(()=>({status:"completed",value:n.get()}))),v(t,o,[])}export{j,y as p};
